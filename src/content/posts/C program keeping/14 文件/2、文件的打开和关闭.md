## [1. 文件的打开(`fopen`函数)](https://doc.itprojects.cn/0004.zhishi.c/0002.doc/index.html#/12.2.open.close?id=_1-%e6%96%87%e4%bb%b6%e7%9a%84%e6%89%93%e5%bc%80fopen%e5%87%bd%e6%95%b0)

`fopen`函数用来打开一个文件，其调用的一般形式为

![[_attachments/Pasted image 20250114144942.png]]

表示：

- 在当前目录下以只允许“读”方式 打开`test.c`文件，并使`fp`指向该文件
- 文件指针名：必须是被说明为`FILE` 类型的指针变量
- 文件名：是被打开文件的文件名
- 使用文件方式：是指文件的类型和操作要求

## [2. 文件关闭函数(`fclose`函数)](https://doc.itprojects.cn/0004.zhishi.c/0002.doc/index.html#/12.2.open.close?id=_2-%e6%96%87%e4%bb%b6%e5%85%b3%e9%97%ad%e5%87%bd%e6%95%b0fclose%e5%87%bd%e6%95%b0)

文件一旦使用完毕，应用关闭文件函数把文件关闭，以避免误操作导 致文件的数据丢失等错误

fclose函数调用的一般形式是

![[_attachments/Pasted image 20250114144948.png]]

注意：

- 如果文件写操作时，没有关闭可能会导致文件写入的数据不能正确的保存到文件中
- 正常完成关闭文件操作时，`fclose`函数返回值为`0`。如返回非零值则表示有错误发生

## [3. 文件使用的方式](https://doc.itprojects.cn/0004.zhishi.c/0002.doc/index.html#/12.2.open.close?id=_3-%e6%96%87%e4%bb%b6%e4%bd%bf%e7%94%a8%e7%9a%84%e6%96%b9%e5%bc%8f)

![[_attachments/Pasted image 20250114144958.png]]

#### [有以下12种方法：](https://doc.itprojects.cn/0004.zhishi.c/0002.doc/index.html#/12.2.open.close?id=%e6%9c%89%e4%bb%a5%e4%b8%8b12%e7%a7%8d%e6%96%b9%e6%b3%95%ef%bc%9a)

- `r`、`w`、`a`、`r+`、`w+`、`a+` （默认为文本文件类型）
- `rb`、`wb`、`ab`、`rb+`、`wb+`、`ab+`

#### [注意事项](https://doc.itprojects.cn/0004.zhishi.c/0002.doc/index.html#/12.2.open.close?id=%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9)

1）文件使用方式由r、w、a、t、b 和 + 六个字符拼成，各字符的含义是:

- `r(read)`:读
- `w(write)`:写
- `a(append)`:追加
- `t(text)`:文本文件,可省略不写
- `b(banary)`:二进制文件
- `+`:读和写

2）凡用`“r”`打开一个文件时，该文件必须已经存在，且只能从该文件读出

3）用`“w`”打开的文件只能向该文件写入

- 若打开的文件不存在，则以指定的文件名建立该文件
- 若打开的文件已经存在,则将该文件删去,重建一个新文件

4）若要向一个已存在的文件追加新的信息，只能用`“a”`方式打开文件

- 如果文件不存在，也会自动创建

5）在打开一个文件时，如果出错，`fopen`将返回一个空指针值`NULL`

在程序中可以用这一信息来判别是否完成打开文件的工作，并作相应的处理 因此常用以下程序段打开文件

![[_attachments/Pasted image 20250114145008.png]]

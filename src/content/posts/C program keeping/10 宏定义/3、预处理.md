# [`#include`指令](https://doc.itprojects.cn/0004.zhishi.c/0002.doc/index.html#/10.5.include?id=include%e6%8c%87%e4%bb%a4)

## [1. 说明](https://doc.itprojects.cn/0004.zhishi.c/0002.doc/index.html#/10.5.include?id=_1-%e8%af%b4%e6%98%8e)

`#include`指令是C预处理程序的另一个重要功能

作用是：告诉编译器我们要使用哪个“工具箱”中的工具了，如： `#include "stdio.h"`

## [2. 文件包含的实质](https://doc.itprojects.cn/0004.zhishi.c/0002.doc/index.html#/10.5.include?id=_2-%e6%96%87%e4%bb%b6%e5%8c%85%e5%90%ab%e7%9a%84%e5%ae%9e%e8%b4%a8)

`#include`命令的功能是：把指定的文件中所有的内容替换该`#include`命令

## [3. 文件包含命令的格式](https://doc.itprojects.cn/0004.zhishi.c/0002.doc/index.html#/10.5.include?id=_3-%e6%96%87%e4%bb%b6%e5%8c%85%e5%90%ab%e5%91%bd%e4%bb%a4%e7%9a%84%e6%a0%bc%e5%bc%8f)

`#include` 有2种情况

1. `#include " "` 意义是包含一个用户定义的文件，可以是头文件，也可是普通文件
2. `#include <>` 意义是包含一个系统(编译器自带)的头文件

注意：

`#include` 语句之后不需要加 `";"` 因为`#include`它使一个预处理指令，不是一个语句

```
#include <stdio.h>
#include <math.h>
#include "one.h"
```

## [4. `#include`文件搜索顺序](https://doc.itprojects.cn/0004.zhishi.c/0002.doc/index.html#/10.5.include?id=_4-include%e6%96%87%e4%bb%b6%e6%90%9c%e7%b4%a2%e9%a1%ba%e5%ba%8f)

`当前文件夹` --->`编译器include文件夹` --->`系统include文件夹`-->`(如果 找不到)报错`

【文件包含注意事项 】

`#include`的时候，可以包含路径

```
#include "./test/mylib.h"
```

- 加载当前文件夹下的`test`文件夹下得`mylib.h`这个头文件

# [`#if-#else`](https://doc.itprojects.cn/0004.zhishi.c/0002.doc/index.html#/10.6.def?id=if-else)

## [1. 条件编译](https://doc.itprojects.cn/0004.zhishi.c/0002.doc/index.html#/10.6.def?id=_1-%e6%9d%a1%e4%bb%b6%e7%bc%96%e8%af%91)

预处理除了给我们提供了`#define`、`#include`等指令以外，也提供了逻辑`if`功能的指令，极大的扩展了预处理阶段所能处理的范围

如果我们想判断之前的宏定义是否被定义过，可以这样

![[_attachments/Pasted image 20250114144109.png]]

表示如果前面定义过宏`M`则可以将特定的代码块编译到可执行程序中，可以调用执行；否则不把代码块编译到源文件里，无法实现调用

`这样我们可以看到条件编译就是为了实现在满足一定条件时编译某一 组语句，而在不满足条件时编译另一组语句!`

事实上，它确实与条件语句相似，但是它们是不一样的。条件语句中的各个语句都是要经过编译的，而条件编译中的部分语句不需要进行编译(请注意这里是编译不是执行)

条件编译的作用，在编写大型程序的时候就会相当的明显，因为它可以减少被编译的语句，从而减少目标程序的长度，减少运行时间

## [2. `#if-#else`](https://doc.itprojects.cn/0004.zhishi.c/0002.doc/index.html#/10.6.def?id=_2-if-else)

![[_attachments/Pasted image 20250114144115.png]]

它的功能是： 如常量表达式的值为真(非0)，则对程序段1进行编译；否则对程序段2进行编译

因此可以使程序在不同条件下，完成不同的功能

![[_attachments/Pasted image 20250114144124.png]]

通过上面的这个例子说明，虽然代码中有3个函数名相同的函数 （正常情况下一个程序中，是不允许出现函数名相同的），而通过条件编译，就可以了编译

原因是因为：条件编译是在编译阶段的时候根据条件，进行选择性编译，即3个函数中只会有1个编译到最后生成的可执行程序中，其它不符合条件的就好比没有写一样

## [3. `#ifdef`](https://doc.itprojects.cn/0004.zhishi.c/0002.doc/index.html#/10.6.def?id=_3-ifdef)

![[_attachments/Pasted image 20250114144131.png]]

功能与之前的 `#if defined M` 相同

它的功能是：如果标识符已被 `#define`命令定义过，则对程序段1进行编译；否则对程序段2进行编译

如果没有程序段2(它为空)，本格式中的`#else`可以没有，即可以写为

![[_attachments/Pasted image 20250114144138.png]]

示例

![[_attachments/Pasted image 20250114144144.png]]

## [4. `#ifndef`](https://doc.itprojects.cn/0004.zhishi.c/0002.doc/index.html#/10.6.def?id=_4-ifndef)

![[_attachments/Pasted image 20250114144151.png]]

功能 : 同 `#if !defined M`，与`#ifdef`形式的功能正相反，它的功能是：如果标识符未被`#define`命令定义过，则对程序段1进行编译；否则对程序段2进行编译
